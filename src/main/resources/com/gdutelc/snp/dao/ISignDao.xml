<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gdutelc.snp.dao.ISignDao">

    <resultMap id="SignMap" type="com.gdutelc.snp.entity.Sign">
        <id property="sid" column="sid"/>
        <result property="uid" column="uid"/>
        <result property="name" column="name"/>
        <result property="grade" column="grade"/>
        <result property="college" column="college"/>
        <result property="major" column="major"/>
        <result property="userclass" column="class"/>
        <result property="description" column="dsp"/>
        <result property="dno" column="dno"/>
        <result property="secdno" column="secdno"/>
        <result property="gender" column="gender"/>
        <result property="sno" column="sno"/>
        <result property="qq" column="qq"/>
        <result property="domitory" column="domitory"/>
        <result property="know" column="know"/>
        <result property="party" column="party"/>
    </resultMap>
    <resultMap id="DSignMap" type="com.gdutelc.snp.dto.Dsign">
        <result property="uid" column="uid"/>
        <result property="name" column="name"/>
        <result property="phone" column="phone"/>
        <result property="grade" column="grade"/>
        <result property="college" column="college"/>
        <result property="major" column="major"/>
        <result property="userclass" column="class"/>
        <result property="description" column="dsp"/>
        <result property="dno" column="dno"/>
        <result property="secdno" column="secdno"/>
        <result property="gender" column="gender"/>
        <result property="sno" column="sno"/>
        <result property="qq" column="qq"/>
        <result property="domitory" column="domitory"/>
        <result property="know" column="know"/>
        <result property="party" column="party"/>
    </resultMap>

    <insert id="insertSign" parameterType="com.gdutelc.snp.entity.Sign">
        INSERT INTO db_sign_up.t_sign (uid, `name`, grade, college, major, class, dsp, dno,secdno, gender, sno, qq, domitory, know, party)
        values (#{uid}, #{name}, #{grade}, #{college}, #{major}, #{userclass}, #{description}, #{dno}, #{secdno}, #{gender}, #{sno}, #{qq}, #{domitory}, #{know}, #{party})
    </insert>
    <select id="getSignByUid" resultMap="SignMap" parameterType="java.lang.Integer">
        SELECT sid, uid, `name`, grade, college, major, class, dsp, dno,secdno, gender, sno, qq, domitory, know, party
        FROM db_sign_up.t_sign
        WHERE uid = #{uid}
        LIMIT 1
    </select>
    <select id="getDsignByUid" resultMap="DSignMap" parameterType="java.lang.Integer">
        SELECT db_sign_up.t_sign.uid,`name`, db_sign_up.t_user.phone,grade, college, major, class, dsp, dno,secdno, gender, sno, qq, domitory, know, party
        FROM db_sign_up.t_sign,db_sign_up.t_user
        WHERE db_sign_up.t_sign.uid = #{uid}
        AND db_sign_up.t_user.uid = #{uid}
        LIMIT 1
    </select>
    <select id="getDsignByGender" resultMap="DSignMap" parameterType="java.lang.Boolean">
        SELECT db_sign_up.t_sign.uid,`name`,db_sign_up.t_user.phone, grade, college, major, class, dsp, dno,secdno, gender, sno, qq, domitory, know, party
        FROM db_sign_up.t_sign,db_sign_up.t_user
        WHERE gender = #{gender}
        AND  db_sign_up.t_sign.uid =db_sign_up.t_user.uid
    </select>
    <select id="getDsignByCollege" resultMap="DSignMap" parameterType="java.lang.Integer">
        SELECT db_sign_up.t_sign.uid,`name`, db_sign_up.t_user.phone,grade, college, major, class, dsp, dno,secdno, gender, sno, qq, domitory, know, party
        FROM db_sign_up.t_sign,db_sign_up.t_user
        WHERE db_sign_up.t_sign.college = #{college}
        AND  db_sign_up.t_sign.uid =db_sign_up.t_user.uid
    </select>
    <select id="getDsignByDno" resultMap="DSignMap"  parameterType="java.lang.Integer">
        SELECT db_sign_up.t_sign.uid,`name`,db_sign_up.t_user.phone, grade, college, major, class, dsp, dno,secdno, gender, sno, qq, domitory, know, party
        FROM db_sign_up.t_sign,db_sign_up.t_user
        WHERE dno = #{dno}
        AND  db_sign_up.t_sign.uid =db_sign_up.t_user.uid
    </select>
    <select id="checkForm" resultType="java.lang.Integer" parameterType="java.lang.Integer">
        SELECT count(uid)
        FROM db_sign_up.t_sign
        WHERE uid = #{uid}
    </select>
    <select id="getAllSign" resultMap="SignMap" >
        SELECT *
        FROM db_sign_up.t_sign
    </select>
    <update id="updateDsignInformByUid" >
        UPDATE db_sign_up.t_sign
        SET `name` = #{dsign.name},
            grade = #{dsign.grade},
            college = #{dsign.college},
            major = #{dsign.major},
            class = #{dsign.userclass},
            dsp = #{dsign.description},
            dno = #{dsign.dno},
            secdno = #{dsign.secdno},
            gender = #{dsign.gender},
            sno = #{dsign.sno},
            qq = #{dsign.qq},
            domitory = #{dsign.domitory},
            know = #{dsign.know},
            party = #{dsign.party}
        WHERE uid = #{uid}
    </update>
    <update id="updateGenderByUid" >
        UPDATE db_sign_up.t_sign
        SET gender = #{gender}
        WHERE uid = #{uid}
    </update>






</mapper>